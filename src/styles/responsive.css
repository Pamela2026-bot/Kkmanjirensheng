/**
 * H5活动页响应式适配样式
 * 设计稿基准：750px × 1624px
 * 适配范围：320px - 430px
 */

/* ========== 基础适配变量 ========== */
:root {
  /* 设计稿基准宽度 */
  --design-width: 750;
  
  /* 字体大小基准（使用clamp实现自适应） */
  --font-size-xs: clamp(12px, 3.2vw, 20px);      /* 小字号：12-20px */
  --font-size-sm: clamp(14px, 3.73vw, 22px);     /* 小字号：14-22px */
  --font-size-base: clamp(16px, 4.27vw, 24px);   /* 基础字号：16-24px */
  --font-size-md: clamp(18px, 4.8vw, 26px);      /* 中字号：18-26px */
  --font-size-lg: clamp(20px, 5.33vw, 32px);     /* 大字号：20-32px */
  --font-size-xl: clamp(22px, 5.87vw, 35px);     /* 超大字号：22-35px */
  
  /* 行高比例 */
  --line-height-tight: 1.4;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.6;
  
  /* 间距系统（基于百分比和vw） */
  --spacing-xs: clamp(4px, 1.07vw, 8px);
  --spacing-sm: clamp(8px, 2.13vw, 12px);
  --spacing-base: clamp(12px, 3.2vw, 16px);
  --spacing-md: clamp(16px, 4.27vw, 20px);
  --spacing-lg: clamp(20px, 5.33vw, 32px);
  --spacing-xl: clamp(24px, 6.4vw, 40px);
  
  /* 容器最大宽度 */
  --container-max-width: 430px;
  --container-min-width: 320px;
}

/* ========== 全局响应式容器 ========== */
.responsive-container {
  width: 100%;
  max-width: var(--container-max-width);
  min-width: var(--container-min-width);
  margin: 0 auto;
  position: relative;
  /* 保持设计稿宽高比 750:1624 */
  aspect-ratio: 750 / 1624;
  overflow: hidden;
}

/* 横屏适配 */
@media (orientation: landscape) and (max-height: 500px) {
  .responsive-container {
    aspect-ratio: unset;
    min-height: 100vh;
  }
}

/* ========== 文字模块响应式样式 ========== */

/* 小字号（12-20px区间） */
.text-xs {
  font-size: var(--font-size-xs);
  line-height: var(--line-height-normal);
}

/* 小字号（14-22px区间） */
.text-sm {
  font-size: var(--font-size-sm);
  line-height: var(--line-height-normal);
}

/* 基础字号（16-24px区间） */
.text-base {
  font-size: var(--font-size-base);
  line-height: var(--line-height-normal);
}

/* 中字号（18-26px区间） */
.text-md {
  font-size: var(--font-size-md);
  line-height: var(--line-height-normal);
}

/* 大字号（20-32px区间） */
.text-lg {
  font-size: var(--font-size-lg);
  line-height: var(--line-height-normal);
}

/* 超大字号（22-35px区间） */
.text-xl {
  font-size: var(--font-size-xl);
  line-height: var(--line-height-tight);
}

/* 文字溢出处理 */
.text-overflow-ellipsis {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* 多行文字自动换行 */
.text-wrap {
  word-wrap: break-word;
  word-break: break-word;
  overflow-wrap: break-word;
}

/* ========== 背景图片响应式适配 ========== */

/* 全屏背景图 - 核心视觉区域不被裁切 */
.bg-fullscreen {
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  width: 100%;
  height: 100%;
}

/* 保持宽高比的背景图 */
.bg-contain {
  background-size: contain;
  background-position: center center;
  background-repeat: no-repeat;
}

/* 局部背景图（按钮、卡片等） */
.bg-adaptive {
  background-size: 100% 100%;
  background-position: center;
  background-repeat: no-repeat;
}

/* ========== 图片素材响应式适配 ========== */

/* 标题切图 - 保持原始宽高比 */
.img-title {
  width: 100%;
  max-width: 100%;
  height: auto;
  display: block;
}

/* 装饰性图片 - 限制最大尺寸 */
.img-decoration {
  max-width: 100%;
  height: auto;
  object-fit: contain;
}

/* 头像/图标类小图 - 固定宽高比 */
.img-icon {
  width: 100%;
  height: auto;
  object-fit: cover;
}

/* ========== 布局响应式 ========== */

/* Flex弹性容器 */
.flex-container {
  display: flex;
  width: 100%;
}

.flex-center {
  display: flex;
  justify-content: center;
  align-items: center;
}

.flex-between {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.flex-column {
  display: flex;
  flex-direction: column;
}

/* 响应式间距 */
.gap-xs { gap: var(--spacing-xs); }
.gap-sm { gap: var(--spacing-sm); }
.gap-base { gap: var(--spacing-base); }
.gap-md { gap: var(--spacing-md); }
.gap-lg { gap: var(--spacing-lg); }
.gap-xl { gap: var(--spacing-xl); }

/* 响应式内边距 */
.p-xs { padding: var(--spacing-xs); }
.p-sm { padding: var(--spacing-sm); }
.p-base { padding: var(--spacing-base); }
.p-md { padding: var(--spacing-md); }
.p-lg { padding: var(--spacing-lg); }
.p-xl { padding: var(--spacing-xl); }

/* 响应式外边距 */
.m-xs { margin: var(--spacing-xs); }
.m-sm { margin: var(--spacing-sm); }
.m-base { margin: var(--spacing-base); }
.m-md { margin: var(--spacing-md); }
.m-lg { margin: var(--spacing-lg); }
.m-xl { margin: var(--spacing-xl); }

/* ========== 媒体查询分级适配 ========== */

/* 小屏设备 (320px - 360px) */
@media (max-width: 360px) {
  :root {
    /* 确保小屏字号不小于12px */
    --font-size-xs: 12px;
    --font-size-sm: 14px;
    --font-size-base: 16px;
    --font-size-md: 18px;
    --font-size-lg: 20px;
    --font-size-xl: 22px;
  }
  
  /* 小屏减小间距避免挤压 */
  .responsive-container {
    padding: 0 clamp(8px, 2.67vw, 12px);
  }
}

/* 中屏设备 (361px - 390px) - iPhone 12/13/14 标准尺寸 */
@media (min-width: 361px) and (max-width: 390px) {
  :root {
    /* 使用设计稿字号的标准比例 */
    --font-size-xs: clamp(12px, 3.33vw, 18px);
    --font-size-sm: clamp(14px, 3.87vw, 20px);
    --font-size-base: clamp(16px, 4.4vw, 22px);
    --font-size-md: clamp(18px, 4.93vw, 24px);
    --font-size-lg: clamp(20px, 5.47vw, 28px);
    --font-size-xl: clamp(22px, 6vw, 30px);
  }
}

/* 大屏设备 (391px - 430px) - iPhone Pro Max */
@media (min-width: 391px) {
  :root {
    /* 大屏字号不超过设计稿1.1倍 */
    --font-size-xs: clamp(16px, 3.73vw, 22px);
    --font-size-sm: clamp(18px, 4.07vw, 24px);
    --font-size-base: clamp(20px, 4.4vw, 26px);
    --font-size-md: clamp(22px, 4.8vw, 29px);
    --font-size-lg: clamp(24px, 5.33vw, 35px);
    --font-size-xl: clamp(26px, 5.87vw, 39px);
  }
  
  /* 大屏增加间距避免过挤 */
  .responsive-container {
    padding: 0 clamp(16px, 4.27vw, 20px);
  }
}

/* ========== 横屏适配 ========== */
@media (orientation: landscape) {
  .responsive-container {
    max-height: 100vh;
    overflow-y: auto;
    overflow-x: hidden;
  }
  
  /* 横屏时调整字号 */
  :root {
    --font-size-xs: 12px;
    --font-size-sm: 14px;
    --font-size-base: 16px;
    --font-size-md: 18px;
    --font-size-lg: 20px;
    --font-size-xl: 22px;
  }
}

/* ========== 触摸优化 ========== */
.touch-target {
  /* 确保触摸区域至少44×44px（iOS人机界面指南） */
  min-width: 44px;
  min-height: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* ========== 性能优化 ========== */

/* 使用硬件加速 */
.gpu-accelerated {
  transform: translateZ(0);
  will-change: transform;
  backface-visibility: hidden;
}

/* 图片懒加载优化 */
.lazy-image {
  opacity: 0;
  transition: opacity 0.3s ease-in-out;
}

.lazy-image.loaded {
  opacity: 1;
}

/* ========== 兼容性修复 ========== */

/* 修复iOS Safari 100vh问题 */
.full-height {
  min-height: 100vh;
  min-height: -webkit-fill-available;
}

/* 修复安卓微信内置浏览器flex布局bug */
.flex-fix {
  min-height: 0;
  min-width: 0;
}

/* 修复部分安卓机型文字显示问题 */
* {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ========== 工具类 ========== */

/* 宽度百分比 */
.w-full { width: 100%; }
.w-50 { width: 50%; }
.w-33 { width: 33.333%; }
.w-25 { width: 25%; }

/* 高度自适应 */
.h-auto { height: auto; }
.h-full { height: 100%; }

/* 定位 */
.relative { position: relative; }
.absolute { position: absolute; }
.fixed { position: fixed; }

/* 显示控制 */
.block { display: block; }
.inline-block { display: inline-block; }
.hidden { display: none; }

/* 溢出控制 */
.overflow-hidden { overflow: hidden; }
.overflow-auto { overflow: auto; }
.overflow-scroll { overflow: scroll; }

/* ========== 按钮响应式 ========== */
.btn-responsive {
  width: 100%;
  max-width: 100%;
  height: auto;
  padding: var(--spacing-base) var(--spacing-lg);
  font-size: var(--font-size-lg);
  line-height: var(--line-height-tight);
  border-radius: clamp(8px, 2.13vw, 12px);
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

/* ========== 输入框响应式 ========== */
.input-responsive {
  width: 100%;
  padding: var(--spacing-base);
  font-size: var(--font-size-base);
  line-height: var(--line-height-normal);
  border-radius: clamp(6px, 1.6vw, 10px);
}

/* ========== 卡片容器响应式 ========== */
.card-responsive {
  width: 100%;
  padding: var(--spacing-md);
  border-radius: clamp(8px, 2.13vw, 16px);
  box-sizing: border-box;
}

/* ========== 调试辅助（开发环境使用） ========== */
.debug-responsive {
  position: fixed;
  top: 0;
  right: 0;
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 4px 8px;
  font-size: 10px;
  z-index: 9999;
  pointer-events: none;
}

.debug-responsive::after {
  content: 'W: ' attr(data-width) ' | H: ' attr(data-height);
}
